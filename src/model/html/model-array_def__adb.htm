<HEAD><TITLE>model-array_def.adb</TITLE></HEAD>
<BODY>
<HR><DIV ALIGN="center"><H1> File : model-array_def.adb </H1></DIV><HR>
<PRE>
<b>with</b> Ada.Text_IO;

<b>with</b> Reflection;
<b>with</b> Test_Utils;

<b>with</b> Model.Package_Def;

<b>package</b> <b>body</b> Model.Array_Def <b>is</b>

  <b>package</b> Unit <b>is</b> <b>new</b> Reflection;

  <b>function</b> Create
    (Owner_Package  : <b>access</b> Package_Def.Object_T'Class;
     Name           : <b>in</b> String;
     Contained_Type : <b>in</b> String;
     Index_Type     : <b>in</b> String;
     Defined_Range  : <b>in</b> String)
    <b>return</b> <b>not</b> <b>null</b> <b>access</b> Object_T'Class
  <b>is</b>
    Obj_Array : <b>constant</b> <b>access</b> Object_T :=
      <b>new</b> Object_T'(Type_Def.Object_T <b>with</b>
                    Owner_Package =&gt; Owner_Package,
                    <b>others</b>        =&gt; <b>null</b>);
  <b>begin</b>
    Obj_Array.Set_Name (Name);
    Obj_Array.Contained_Type := <b>new</b> String'(Contained_Type);
    Obj_Array.Index_Type     := <b>new</b> String'(Index_Type);
    Obj_Array.Defined_Range  := <b>new</b> String'(Defined_Range);

    <b>return</b> Obj_Array;
  <b>end</b> Create;

<b>begin</b>

  <b>declare</b>
    <b>package</b> T_IO <b>renames</b> Ada.Text_IO;

    Obj_Package : <b>access</b> Package_Def.Object_T := <b>null</b>;
    Obj_Array   : <b>access</b> Object_T             := <b>null</b>;

    <b>procedure</b> Set_Up;

    <b>procedure</b> Set_Up
    <b>is</b>
    <b>begin</b>
      Obj_Package := Package_Def.Create (Name =&gt; "package_a");
      Obj_Array   := Create
        (Owner_Package                        =&gt; Obj_Package,
         Name                                 =&gt; "array_a",
         Contained_Type                       =&gt; "contained",
         Index_Type                           =&gt; "index",
         Defined_Range                        =&gt; "index'first .. index'last");
    <b>end</b> Set_Up;

  <b>begin</b>
    Test_Utils.Section (Unit_Name =&gt; Unit.Name);

    <FONT COLOR=green><EM>--  T_IO.New_Line;</EM></FONT>
    <FONT COLOR=green><EM>--  T_IO.Put_Line ("--------------------------------------");</EM></FONT>
    <FONT COLOR=green><EM>--  T_IO.Put_Line ("debut des tests de " &amp; Unit.Name);</EM></FONT>
    <FONT COLOR=green><EM>--  --  Tests.Section (Unit.Name);</EM></FONT>
    <FONT COLOR=green><EM>--  T_IO.New_Line;</EM></FONT>

    Set_Up;

    T_IO.Put_Line (Obj_Array.Get_Name);

  <b>end</b>;

<b>end</b> Model.Array_Def;
</PRE></BODY></HTML>
